async function start(imageElements){console.log("开始准备数据 (Start to prepare the data).");var zip=new JSZip;for(const imageElement of imageElements){let url=imageElement.href.toString();let fileName=url.substring(url.lastIndexOf("/")+1,url.lastIndexOf(".")-1);let extName=url.substring(url.lastIndexOf(".")+1);let blob=await getBlob(url,extName);zip.file(fileName+"."+extName,blob,{base64:false})}download(zip)}function getBlob(url,type){return new Promise((ret,res)=>{let img=new Image;img.setAttribute("crossOrigin","anonymous");img.src=url;img.onload=function(){let _canvas=document.createElement("canvas");_canvas.setAttribute("width",this.width);_canvas.setAttribute("height",this.height);_canvas.getContext("2d").drawImage(this,0,0,this.width,this.height);_canvas.toBlob(function(blob){ret(blob)},`image/${type}`,.92)}})}function download(zip){zip.generateAsync({type:"blob"}).then(function(content){console.log("开始下载 (Start the download).");var eleLink=document.createElement("a");eleLink.download=(new Date).getTime()+".zip";eleLink.style.display="none";eleLink.href=URL.createObjectURL(content);document.body.appendChild(eleLink);eleLink.click();document.body.removeChild(eleLink)})}